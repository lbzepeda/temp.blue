---
import { Image } from 'astro:assets';

const modalContent = {
  R410A: {
    title: 'R410A - Refrigerante Ecol√≥gico',
    content:
      'El R410A es un refrigerante de alta eficiencia y bajo impacto ambiental. No da√±a la capa de ozono y tiene un potencial de calentamiento global menor que sus predecesores. Es ampliamente utilizado en sistemas modernos de aire acondicionado por su excelente capacidad de transferencia de calor y eficiencia energ√©tica.',
  },
  GMCC: {
    title: 'GMCC - Tecnolog√≠a de Compresores',
    content:
      'GMCC es uno de los mayores fabricantes mundiales de compresores. Sus compresores son reconocidos por su alta eficiencia, durabilidad superior y funcionamiento silencioso. La tecnolog√≠a avanzada de GMCC permite un control preciso de la temperatura mientras maximiza el ahorro de energ√≠a.',
  },
};
---

<section id="bento" class="bg-[#FBFBFD] dark:bg-black py-16">
  <div class="max-w-[1000px] mx-auto px-4 sm:px-6">
    <div class="text-center max-w-xl mx-auto mb-12">
      <h2 class="text-4xl font-semibold text-slate-900 dark:text-white mb-3">
        Climatizaci√≥n
      </h2>
      <p class="text-xl font-light text-slate-500 dark:text-slate-400">
        Dise√±ado para tu comfort. Ingeniosamente simple.
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <!-- Desing card -->
      <div class="md:col-span-2 group">
        <div
          class="h-[400px] rounded-2xl overflow-hidden relative shadow-lg hover:shadow-xl transition-all duration-500"
        >
          <div class="h-full">
            <!-- A√±adido h-full -->
            <Image
              src="/bento-imagen.webp"
              width={600}
              height={400}
              alt="Dise√±o adaptado"
              class="w-full h-full object-cover opacity-90"
              loading="eager"
              format="webp"
              quality={65}
            />
          </div>
        </div>
      </div>

      <!-- Wifi Connect -->
      <div class="group">
        <div
          class="h-[400px] bg-white dark:bg-gradient-to-r dark:from-slate-900 dark:to-slate-800 rounded-2xl p-8 overflow-hidden relative shadow-lg hover:shadow-xl transition-all duration-500"
        >
          <div class="relative z-10 h-full flex flex-col">
            <h3
              class="text-4xl font-medium text-slate-900 dark:text-white mb-4"
            >
              Conectividad Wi-Fi
            </h3>
            <span
              class="text-7xl font-bold bg-gradient-to-r from-blue-600 to-blue-400 bg-clip-text text-transparent"
              >Smart</span
            >
            <span class="text-xl text-slate-500 mt-2">Control</span>
            <p
              class="text-sm text-right font-medium text-slate-600 dark:text-slate-200 mt-auto"
            >
              Kit Wi-Fi opcional disponible *
            </p>
          </div>
        </div>
      </div>

      <!-- Ultra Silent -->
      <div class="group">
        <div
          class="h-[300px] bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 rounded-2xl p-8 overflow-hidden relative shadow-lg hover:shadow-xl transition-all duration-500"
        >
          <div class="relative z-10">
            <div
              class="text-6xl font-light text-slate-900 dark:text-white tracking-tight"
            >
              22.5<span class="text-3xl ml-1 font-light">dB</span>
            </div>
            <p
              class="text-4xl font-medium text-slate-700 dark:text-slate-300 mt-3"
            >
              M√°s silencioso que un susurro
            </p>
            <p class="text-sm text-slate-600 dark:text-slate-400 mt-2">
              Ideal para dormitorios y oficinas
            </p>
          </div>
          {
            Array.from({ length: 3 }).map((_, i) => (
              <div
                class="absolute w-48 h-48 border-[2px] border-slate-300/60 dark:border-slate-600/60 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-1000"
                style={`left: 50%; top: 50%; animation: soundWave 3s infinite ${i * 0.5}s ease-out; transform: translate(-50%, -50%) scale(${0.2 + i * 0.3});`}
              />
            ))
          }
        </div>
      </div>

      <!-- High Efficiency -->
      <div class="group">
        <div
          class="h-[300px] bg-white dark:bg-gradient-to-r dark:from-slate-900 dark:to-slate-800 rounded-2xl p-8 overflow-hidden relative shadow-lg hover:shadow-xl transition-all duration-500"
        >
          <div class="relative z-10 flex flex-col">
            <h3
              class="text-4xl font-medium text-slate-900 dark:text-white mb-3"
            >
              Alta Eficiencia Energ√©tica
            </h3>
            <div class="flex items-baseline gap-2">
              <span
                class="text-7xl font-bold bg-gradient-to-r from-green-600 to-green-400 bg-clip-text text-transparent"
                >21.5</span
              >
              <span class="text-xl text-slate-500">SEER2</span>
            </div>
            <p class="text-sm text-slate-600 dark:text-slate-400 mt-4">
              Hasta 40% menos consumo energ√©tico
            </p>
          </div>
        </div>
      </div>

      <!-- Eco-friendly Technology -->
      <div class="group">
        <div
          class="h-[300px] border-green-500 border dark:from-slate-900 dark:to-slate-800 rounded-2xl p-8 overflow-hidden relative shadow-lg hover:shadow-xl transition-all duration-500"
        >
          <div class="flex items-center gap-3 mb-6">
            <span class="text-4xl">üå±</span>
            <h3
              class="text-2xl font-semibold text-slate-900 dark:text-white relative"
            >
              Eco-friendly
              <span class="absolute bottom-0 left-0 w-full h-0.5 bg-green-500"
              ></span>
            </h3>
          </div>
          <div class="mb-4">
            <h4 class="text-base font-semibold text-slate-900 dark:text-white">
              <button
                data-modal-type="R410A"
                class="text-blue-700 dark:text-blue-300 hover:text-blue-800 dark:hover:text-blue-200 font-medium underline-offset-4 hover:underline transition-all modal-trigger"
              >
                R410A
              </button>
            </h4>
            <p class="text-sm text-slate-600 dark:text-slate-400">
              Refrigerante ecol√≥gico de √∫ltima generaci√≥n
            </p>
          </div>
          <div>
            <h4 class="text-base font-semibold text-slate-900 dark:text-white">
              <button
                data-modal-type="GMCC"
                class="text-blue-700 dark:text-blue-300 hover:text-blue-800 dark:hover:text-blue-200 font-medium underline-offset-4 hover:underline transition-all modal-trigger"
              >
                GMCC
              </button>
            </h4>
            <p class="text-sm text-slate-600 dark:text-slate-400">
              Compresor de alta durabilidad y eficiencia
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <dialog
    id="infoModal"
    class="p-8 rounded-2xl w-full max-w-md bg-white dark:bg-slate-800 backdrop:bg-black/50 shadow-xl dark:shadow-2xl dark:shadow-slate-900/50"
  >
    <div class="relative">
      <button
        onclick="this.closest('dialog').close()"
        class="absolute -right-2 -top-2 bg-slate-100 dark:bg-slate-700 p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors"
      >
        <svg class="w-4 h-4 text-slate-500" viewBox="0 0 24 24">
          <path
            fill="currentColor"
            d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
          ></path>
        </svg>
      </button>
      <h3
        id="modalTitle"
        class="text-2xl font-medium text-slate-900 dark:text-white mb-4"
      >
      </h3>
      <p
        id="modalContent"
        class="text-slate-600 dark:text-slate-300 leading-relaxed"
      >
      </p>
    </div>
  </dialog>
</section>

<script is:inline define:vars={{ modalContent }}>
  const modal = document.getElementById('infoModal');
  const buttons = document.querySelectorAll('.modal-trigger');

  buttons.forEach((button) => {
    button.addEventListener('click', () => {
      const type = button.dataset.modalType;
      const title = document.getElementById('modalTitle');
      const content = document.getElementById('modalContent');

      title.textContent = modalContent[type].title;
      content.textContent = modalContent[type].content;
      modal.showModal();
    });
  });

  modal.addEventListener('click', (e) => {
    const dialogDimensions = modal.getBoundingClientRect();
    if (
      e.clientX < dialogDimensions.left ||
      e.clientX > dialogDimensions.right ||
      e.clientY < dialogDimensions.top ||
      e.clientY > dialogDimensions.bottom
    ) {
      modal.close();
    }
  });
</script>

<style>
  dialog::backdrop {
    background: rgba(0, 0, 0, 0.5);
  }

  dialog {
    margin: auto;
  }
  @keyframes soundWave {
    0% {
      transform: translate(-50%, -50%) scale(0.2);
      opacity: 0.9;
    }
    50% {
      opacity: 0.5;
    }
    100% {
      transform: translate(-50%, -50%) scale(2.2);
      opacity: 0;
    }
  }
</style>
